<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Bookings - K-Stage</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='style/style.css') }}" rel="stylesheet">
</head>
<body>
   <!-- Enhanced Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <a class="navbar-brand" href="{{url_for('main.index')}}">
        <i class="bi bi-music-note-beamed me-2"></i>K-Stage
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto"> 
          <li class="nav-item"><a class="nav-link" href="{{url_for('main.index')}}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{{url_for('main.events')}}">Events</a></li>
          <li class="nav-item"><a class="nav-link" href="{{url_for('main.create_events')}}">Create Event</a></li><!--update this!! create-event.html-->
          <li class="nav-item"><a class="nav-link active" href="{{url_for('main.booking_history')}}">My Bookings</a></li>
          <li class="nav-item"><a class="nav-link" href="{{url_for('auth.login')}}">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="{{url_for('auth.register')}}">Register</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <!-- Booking History -->
  <section class="container py-5 mt-5">
    <h2 class="fw-bold mb-4">My Booking History</h2>
  
    {% if bookings %}
      <div class="row g-4">
        {% for b in bookings %}
          <div class="col-md-6">
            <div class="card shadow-sm h-100">
              {% if b.event.image_path %}
                <img src="{{ url_for('static', filename=b.event.image_path) }}" class="card-img-top" alt="{{ b.event.title }}">
              {% endif %}
              <div class="card-body">
                <h5 class="card-title fw-bold">{{ b.event.title }}</h5>
                <p class="text-muted mb-1">Order ID: <strong>{{ b.order_id }}</strong></p>
                <p class="text-muted mb-1">Booked on: {{ b.created_at.strftime('%d %b %Y %H:%M') }}</p>
                <p class="mb-0">Tickets: {{ b.qty }}</p>
                <a href="{{ url_for('main.event_detail', event_id=b.event.id) }}" class="btn btn-outline-primary w-100">View Event</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-light border">
        No bookings yet. <a href="{{ url_for('main.events') }}">Browse events</a>
      </div>
    {% endif %}
  </section>

  <footer class="bg-dark text-light text-center py-3">
    <p class="mb-0">&copy; 2025 K-Stage. All rights reserved.</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>

